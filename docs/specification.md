## YouTube動画学習アシスタント アプリケーション仕様書

### 1. はじめに

本ドキュメントは、StreamlitおよびGemini APIを用いて開発される「YouTube動画学習アシスタント」アプリケーションの機能要件と非機能要件を定義するものである。本アプリケーションは、ユーザーがYouTube動画を効率的に学習・整理・要約することを目的とする。

### 2. アプリケーション概要

ユーザーは自然言語でYouTube動画を検索し、アプリ内で動画を再生しながらメモを取ることができる。また、動画の内容についてAI（Gemini API）による自動要約を生成し、学習効率を向上させる。

### 3. 機能要件 (Functional Requirements)

本アプリケーションが提供する主要な機能は以下の通りである。

#### 3.1. YouTube動画検索機能
* **FR-010: 自然言語による動画検索**
    * ユーザーは検索バーに自然言語でキーワードを入力し、関連するYouTube動画を検索できる。
* **FR-020: 検索結果の表示**
    * 検索結果は動画のタイトル、サムネイル、公開元などを含むリストとして表示される。
    * ユーザーは表示されたリストから任意の動画を選択できる。
* **FR-030: 動画選択による再生準備**
    * ユーザーが検索結果リストから動画を選択すると、その動画が再生エリアにロードされる。

#### 3.2. 動画再生およびメモ機能
* **FR-040: アプリ内動画再生**
    * 選択されたYouTube動画は、アプリケーション内で直接再生できる。
    * 動画再生はYouTubeの埋め込みプレイヤーの機能（再生/一時停止、シーク、音量調整など）をサポートする。
* **FR-050: メモ入力と編集**
    * ユーザーは動画を視聴しながら、Markdown形式でメモを入力、編集できるテキストエリアを提供する。
* **FR-060: メモの表示**
    * 入力されたメモは、Markdownレンダリング機能により整形されて表示される。
* **FR-070: メモの保存**
    * ユーザーはメモの内容を、選択した保存先に保存できる。
    * 保存先としては、ローカルファイル（Markdown形式）、または将来的には外部サービス（例: Google Keep, Firestore）が選択可能である。
* **FR-080: 保存場所の指定**
    * ユーザーはメモを保存する際に、事前に定義された複数の保存オプションから一つを選択できる。
* **FR-090: 保存済みメモの読み込み**
    * （将来的な拡張）保存されたメモをアプリケーション内で読み込み、表示・編集できる。

#### 3.3. AIによる動画要約機能
* **FR-100: ワンタッチ要約生成**
    * ユーザーはボタンのクリック一つで、現在再生中の動画のAIによる要約を生成できる。
* **FR-110: 要約の表示**
    * 生成された要約は、アプリケーション内の専用エリアに表示される。
    * 要約は主要なポイントや結論を含む、読みやすい形式で提供される。
* **FR-120: トランスクリプトの利用**
    * AI要約は、YouTube動画の公式トランスクリプト（字幕データ）を基に生成される。

### 4. 非機能要件 (Non-Functional Requirements)

本アプリケーションの品質特性に関する要件は以下の通りである。

#### 4.1. パフォーマンス要件 (Performance)
* **NFR-010: 検索応答時間**
    * YouTube動画検索は、キーワード入力後5秒以内に結果を返すこと。
* **NFR-020: AI要約生成時間**
    * AI要約の生成は、動画の長さにもよるが、概ね20秒以内に完了することを目指す。
* **NFR-030: UI応答性**
    * ボタンクリックや入力に対するUIの応答は、概ね1秒以内であること。

#### 4.2. セキュリティ要件 (Security)
* **NFR-040: APIキーの安全な管理**
    * YouTube Data APIおよびGemini APIのキーは、`st.secrets`などの安全な方法で管理され、コードベースに直接ハードコードしないこと。
* **NFR-050: ユーザーデータの保護**
    * ユーザーのメモ内容やその他の個人情報は、保存場所の選択に応じて適切に保護されること（例: ローカルファイルの場合、ローカルOSのセキュリティに依存。クラウド保存の場合、プロバイダーのセキュリティポリシーに準拠）。

#### 4.3. ユーザビリティ要件 (Usability)
* **NFR-060: 直感的なUI**
    * Streamlitのコンポーネントを用いて、初心者でも直感的に操作できるシンプルなUIを提供すること。
* **NFR-070: エラーメッセージ**
    * API呼び出しの失敗、入力エラーなどが発生した場合、ユーザーに分かりやすいエラーメッセージを表示すること。
* **NFR-080: フィードバック**
    * 検索や要約生成などの時間のかかる処理中は、進行状況を示す視覚的フィードバック（例: スピナー、プログレスバー）を提供すること。

#### 4.4. 信頼性要件 (Reliability)
* **NFR-090: サービス可用性**
    * 外部API（YouTube Data API, Gemini API）の障害時でも、アプリケーションがクラッシュせず、適切なエラーハンドリングを行うこと。
* **NFR-100: データ永続性**
    * ユーザーが保存したメモは、アプリケーションの再起動後も保持されること（選択された保存方法による）。

#### 4.5. 拡張性要件 (Extensibility)
* **NFR-110: モジュール設計**
    * 将来的な機能追加（例: 複数動画の一括管理、メモのエクスポート形式追加）を容易にするため、コードはモジュール性高く設計すること。
* **NFR-120: APIの柔軟性**
    * Gemini API以外のLLMサービスへの切り替えも考慮した設計とすること。

#### 4.6. 運用要件 (Operability)
* **NFR-130: ログ出力**
    * アプリケーションの動作状況やエラー、API呼び出しに関するログを適切に出力できること。
* **NFR-140: 環境構築の容易さ**
    * 必要なライブラリや環境設定は、`requirements.txt`などで明確に定義し、容易に環境構築できること。

### 5. 技術スタック

* **フロントエンド / フレームワーク:** Streamlit
* **バックエンド / 言語:** Python
* **動画API:** YouTube Data API v3
* **AI / LLM:** Google Gemini API
* **データ永続化（選択肢）:** ローカルファイル（Markdown/JSON）、SQLite、Google Firestoreなど

### 6. 今後の課題・検討事項

* ユーザー認証機能の有無
* 動画のトランスクリプト取得における言語サポート
* 複数動画のメモ管理方法
* デプロイ方法（クラウドサービス、オンプレミスなど）